<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>W5D1-2. fl15-2. Local Storage</title>
    <link rel="stylesheet" href="/3JS/CSS/style_stnd_v3.css">
</head>


<body>
    <header>
        <h1>Lecture W5D1-2</h1>
        <h2>2020.10.19</h2>
        <h2>// DOM Objects </h2>
        <p><a target="_blank" href="https://denis-dizi.github.io/RCS2020/3JS/W4D/fl15-2.html" title="GitHub">Link</a> to
            this page at GitHub</p>
    </header>

    <main>
        <h3>Open Console by F12 key.</h3>
        <!-- <h4></h4> -->
        <p>Materials:
        <ul>
            <li><a href="https://github.com/epuce/web-bootcamp" target="_blank"
                    rel="noopener noreferrer">https://github.com/epuce/web-bootcamp</a></li>
            <li><a href="https://github.com/epuce/web-bootcamp/blob/master/W03L03%20-%20JavaScript%20DOM%20events%20&%20handling.md"
                    target="_blank" rel="noopener noreferrer">https://github.com/epuce/web-bootcamp/.../DOM</a></li>
            <!-- <li><a href="http://" target="_blank" rel="noopener noreferrer"></a></li> -->

        </ul>
        </p>
        <br>
        <h3>Practise.</h3>

        <p>
            Classical labeling:<br>
            <label for="name">Name: </label>
            <input id="name">
            <label for="checkbox">Check</label>
            <input type="checkbox" id="checkbox"></input>
        </p><br>

        <p>Second way to label:</p>
        <p>Type text, save to localStorage, get into table.</p>
        <label>Name2:
            <input class="name">
        </label>
        <button id="saveName">Save name to local storage</button>

        <table class="userTable"> </table>
    </main>

</body>
<footer>
    <p>Use validator to check the code: <a target="_blank" href="https://validator.w3.org"> validator.w3.org
        </a>
    </p>
</footer>

<!-- <script src="js/script15-2.js"></script> -->
<script>
    //(0:13:) second video
    document.getElementById("saveName").addEventListener("click", function () {
        const nameInput = document.getElementsByClassName('name')[0];
        console.log('click');
        // console.log(nameInput);
        console.log(nameInput.value);

        //(0:21:) if no users, create new
        let users = localStorage.users;

        if (users) { //add to existing arr (0:28:)
            users = users.split(",");
            users.push(nameInput.value);

        } else { //create new arr (0:21:)
            console.log("no users");
            users = [];
            users.push(nameInput.value);
            console.log(users);
        }
        // (0:26:) save to local storage
        localStorage.users = users.toString();
        renderTable();
    });

    //(0:32:)(0:41:)
    function renderTable() {

        table = document.getElementsByClassName("userTable")[0]; //get table
        table.innerHTML = ''; //erase table

        const usersArray = localStorage.users.split(","); //get data list

        usersArray.forEach(function (name) { //go through data list
            table.innerHTML += '<tr><td>' + name + '</td></tr>'; //create new table
        })
    }
    renderTable();

    // (0:34:)(0:40:) Will work only after refreshing
    // const usersArray = localStorage.users.split(",");
    // usersArray.forEach(function(name) {
    //     table = document.getElementsByClassName("userTable")[0];

    //     console.log(table);
    //     table.innerHtml += '<tr><td>'+ name +'</td></tr>';
    // });
</script>

</html>